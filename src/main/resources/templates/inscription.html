<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Inscription</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body>

    <div th:replace="~{fragments/fragment-entete :: entete}"></div>

    <h1 class="text-center text-2xl font-bold my-4">Inscription</h1>

    <!-- ✅ Affichage des erreurs globales -->
    <div th:if="${erreurs}" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert">
        <strong class="font-bold">Erreur :</strong>
        <ul>
            <li th:each="erreur : ${erreurs}" th:text="${erreur}"></li>
        </ul>
    </div>

    <form th:action="@{/inscription}" th:object="${utilisateur}" method="post" class="max-w-lg mx-auto bg-white p-6 rounded shadow-md">
        
        <!-- Affichage des erreurs globales 
        <ul th:if="${#fields.hasGlobalErrors()}" class="text-red-600">
            <li th:each="err : ${#fields.globalErrors()}" th:text="${err}"></li>
        </ul> -->

        <div class="mb-4">
            <label for="pseudo">Pseudo :</label>
            <input type="text" id="pseudo" th:field="*{pseudo}" class="border px-3 py-2 w-full">
            <span class="text-red-600" th:if="${#fields.hasErrors('pseudo')}" th:errors="*{pseudo}"></span>
        </div>

        <div class="mb-4">
            <label for="nom">Nom :</label>
            <input type="text" id="nom" th:field="*{nom}" class="border px-3 py-2 w-full">
            <span class="text-red-600" th:if="${#fields.hasErrors('nom')}" th:errors="*{nom}"></span>
        </div>

        <div class="mb-4">
            <label for="prenom">Prénom :</label>
            <input type="text" id="prenom" th:field="*{prenom}" class="border px-3 py-2 w-full">
            <span class="text-red-600" th:if="${#fields.hasErrors('prenom')}" th:errors="*{prenom}"></span>
        </div>

        <div class="mb-4">
            <label for="email">Email :</label>
            <input type="email" id="email" th:field="*{email}" class="border px-3 py-2 w-full">
            <span class="text-red-600" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></span>
        </div>

        <div class="mb-4">
            <label for="telephone">Téléphone :</label>
            <input type="tel" id="telephone" th:field="*{telephone}" class="border px-3 py-2 w-full">
            <span class="text-red-600" th:if="${#fields.hasErrors('telephone')}" th:errors="*{telephone}"></span>
        </div>

        <div class="mb-4">
            <label for="rue">Rue :</label>
            <input type="text" id="rue" th:field="*{rue}" class="border px-3 py-2 w-full">
            <span class="text-red-600" th:if="${#fields.hasErrors('rue')}" th:errors="*{rue}"></span>
        </div>

        <div class="mb-4">
            <label for="codePostal">Code postal :</label>
            <input type="text" id="codePostal" th:field="*{codePostal}" class="border px-3 py-2 w-full">
            <span class="text-red-600" th:if="${#fields.hasErrors('codePostal')}" th:errors="*{codePostal}"></span>
        </div>

        <div class="mb-4">
            <label for="ville">Ville :</label>
            <input type="text" id="ville" th:field="*{ville}" class="border px-3 py-2 w-full">
            <span class="text-red-600" th:if="${#fields.hasErrors('ville')}" th:errors="*{ville}"></span>
        </div>

        <div class="mb-4">
            <label for="motDePasse">Mot de passe :</label>
            <input type="password" id="motDePasse" th:field="*{motDePasse}" class="border px-3 py-2 w-full" required>
            <span class="text-red-600" th:if="${#fields.hasErrors('motDePasse')}" th:errors="*{motDePasse}"></span>
        </div>

        <div class="mb-4">
            <label for="confirmationMotDePasse">Confirmation :</label>
            <input type="password" id="confirmationMotDePasse" th:field="*{confirmationMotDePasse}" class="border px-3 py-2 w-full" required>

            <!-- ✅ Affichage de l'erreur spécifique si les mots de passe ne correspondent pas 
            <span class="text-red-600" th:if="${erreurConfirmation}" th:text="${erreurConfirmation}"></span>-->
        </div>

        <!-- Boutons d'action -->
        <div class="flex justify-between">
            <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                Créer
            </button>
            <a th:href="@{/}" class="text-blue-500 hover:underline">Annuler</a>
        </div>
    </form>

</body>
</html>
